<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>${value_of('project_name', 'TurboGears')} Administration</title>
</head>

<body>
  <?python
    from itertools import groupby
  ?>

  <div class="row">
    <div class="col-md-12">
      <h1 class="page-header">${value_of('project_name', 'TurboGears')} Admin</h1>
      <p class="lead" py:with="custom_payoff=value_of('payoff', None)" py:choose="">
        <py:when test="custom_payoff is not None">${custom_payoff}</py:when>
        <py:otherwise>
          This is a fully-configurable administrative tool to help you administer your website.<br/>
          Below is links to all of your models.
          They will bring you to a listing of the objects in your database.
        </py:otherwise>
      </p>
    </div>
  </div>

  <br/>

  <div class="row">
    <div class="col-md-12"
         py:with="groupkey=lambda m: getattr(model_config(m)[1], 'admin_group', 'Administration')">
      <div py:for="group_name, models_group in groupby(sorted(models, key=groupkey), groupkey)"
           class="list-group">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">${group_name}</h3>
          </div>
          <div class="list-group">
            <a py:for="model in models_group"
               py:with="modelid, modelcfg = model_config(model)"
               class="list-group-item" href='${modelid}s/'>
              <h4 class="list-group-item-heading"
                  py:with="glyphicon=getattr(modelcfg, 'icon_class', 'glyphicon-list-alt')">
                <span class="glyphicon ${glyphicon}"></span>
                <span>&nbsp; ${model}s</span>
              </h4>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
